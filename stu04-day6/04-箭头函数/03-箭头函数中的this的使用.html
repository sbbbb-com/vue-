<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>this的使用</title>
</head>
<body>

<script>


  //什么时候使用箭头
  // setTimeout(function () {
  //   console.log("普通函数中")
  //   console.log(this)
  // },1000);
  //
  // setTimeout(()=>{
  //   console.log("箭头函数中的")
  //   console.log(this)
  // },1000)

  /**
   *  结论：
   *  【箭头函数中的this引用的就是最近作用域中的this】
   *  问题：箭头函数中的this是如何查找的？
   *  答案：向外层作用域中，一层层的查找this，直到有this的定义
   * @type {{aaa(): void}}
   */
  // const obj={
  //   aaa(){
  //    setTimeout(function () {
  //      console.log("普通函数中")
  //      console.log(this);  //window对象
  //
  //    },1000)
  //
  //
  //     setTimeout(()=>{
  //       console.log("箭头函数中的")
  //       console.log(this) //obj对象
  //     },1000)
  //   }
  // }
  // obj.aaa();


  /**
   * 来着弹幕：：
   *      1.以函数的形式调用，this永远都是window
   *      2.以方法形式调用时，this就是调用方法的那个对象
   * @type {{aaa(): void}}
   */
  const obj={
        aaa(){
          setTimeout(function () {
            //1.
            setTimeout(function () {
              console.log(this); //windows
            })

            //2.
            setTimeout(()=>{
              console.log(this) //windows
            })

          },1000)


          setTimeout(()=>{
            //1.
            setTimeout(function () {
              console.log(this); //windows
            })

            //2.
            setTimeout(()=>{
              console.log(this)  //obj
            })
          },1000)
        }
      }
  obj.aaa();

</script>


</body>
</html>